{% extends "dashboard/base_vertical.html" %}
{% block title %}Competitions – Bet Prediction{% endblock %}

{% block content %}
<h1>Competitions</h1>
<p>Countries and their leagues (list only). To get fixtures: use <a href="{% url 'api_football:sync' %}" style="color:#58a6ff;">Sync league data</a> → select competitions and year → Download, or open a league and use <strong>Download this league</strong> below. <a href="{% url 'api_football:game_list_today' %}" style="color:#58a6ff;">Today</a> · <a href="{% url 'api_football:gemini_predictions' %}" style="color:#58a6ff;">ML predictions</a></p>

{% if messages %}
<ul class="messages" style="list-style:none; padding:0;">
  {% for message in messages %}
  <li style="padding:0.5rem 0.75rem; margin-bottom:0.5rem; border-radius:4px;
    {% if message.tags == 'error' %}background:#3d1f1f; color:#f88;{% endif %}
    {% if message.tags == 'success' %}background:#1f3d1f; color:#8f8;{% endif %}
    {% if message.tags == 'warning' %}background:#3d3d1f; color:#cc8;{% endif %}">
    {{ message }}
  </li>
  {% endfor %}
</ul>
{% endif %}

{% if countries_with_data %}
<ul style="list-style:none; padding:0;">
  {% for row in countries_with_data %}
  <li style="padding:0.75rem 0; border-bottom:1px solid #30363d; display:flex; align-items:center; justify-content:space-between; gap:1rem;">
    <a href="{% url 'api_football:country_detail' row.slug %}" style="font-weight:500; color:#58a6ff; text-decoration:none;">{{ row.country }}</a>
    <span style="font-size:0.9rem; color:#8b949e;">
      {{ row.competition_count }} league{{ row.competition_count|pluralize }}, {{ row.game_count }} game{{ row.game_count|pluralize }}
    </span>
  </li>
  {% endfor %}
</ul>
{% else %}
<p style="color:#8b949e;">No data yet. Use <a href="{% url 'api_football:sync' %}">Sync league data</a> to load countries and download competitions.</p>
{% endif %}
{% endblock %}
